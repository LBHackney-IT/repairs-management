<% content_for :page_header do %>
  <h1 class="govuk-heading-l hackney-property-heading">
    <%= property.description.singularize %>: <%= property.first_line_of_address %>
  </h1>
  <% if Flipper.enabled?(:raise_a_repair) %>
    <% if property.can_raise_a_repair? %>
      <span class="govuk-heading-m hackney-page-header-raise-a-repair">
        <strong>
          <%= link_to "Raise a repair on this #{property.description.downcase.singularize}", new_property_repair_request_path(property.reference), class: 'hackney-link hackney-link-no-visited' %>
        </strong>
      </span>
    <% else %>
      <div class="govuk-warning-text hackney-page-header-no-raise-a-repair">
        <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
        <strong class="govuk-warning-text__text">
          <span class="govuk-warning-text__assistive">Warning</span>
          Cannot raise a repair on this property due to tenure type
        </strong>
      </div>
    <% end %>
  <% end %>


  <div class="govuk-grid-row">
    <div class="govuk-grid-column-one-half">
      <div class="hackney-main-section-info">
        <p class="govuk-body-s hackney-body-s">
          <span class="govuk-body-xs hackney-body-xs hackney-section-info-header">
            Property details
          </span><br>
          <span class="govuk-!-font-weight-bold hackney-text-green">
            <%= format_address(property.address) %>
          </span><br>
          <span class="govuk-body-xs hackney-text-green hackney-body-xs">
            <%= property.postcode %>
          </span><br>
        </p>
        <div class="hackney-warning-labels">
          <%
          clazz = "govuk-body-s hackney-property-warning-label"
          if property.can_raise_a_repair?
          clazz += " hackney-property-warning-label-turquoise"
          else
          clazz += " hackney-property-warning-label-orange"
          end
          %>
          <% if property.tenure.present? %>
          <p class="<%= clazz %>">
            <%= property.tenure %>
          </p>
          <% end %>

          <% if property.is_tmo? %>
          <p class="govuk-body-s hackney-property-warning-label hackney-property-warning-label-orange">
            <%= property.letting_area %>
          </p>
          <% end %>

          <% if @cautionary_contacts.present? %>
            <%= render :partial => 'shared/cautionary_contact_table', locals: { cautionary_contacts: @cautionary_contacts } %>
          <% end %>
        </div>

      </div>
    </div>
  </div>
<% end %>
