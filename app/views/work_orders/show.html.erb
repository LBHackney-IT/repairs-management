<% content_for :page_header do %>
  <h1 class="govuk-heading-l">
    <span class="govuk-caption-l">Work order</span>
    <%= @page.work_order.reference %>
  </h1>

  <p class="govuk-body-l">
    <%= @page.repair_request.description %>
  </p>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-one-third">
      <p class="govuk-body-s">
        <span class="govuk-!-font-weight-bold">
          <%= @page.property.address %>
        </span>
        <%= @page.property.postcode %>
      </p>
    </div>
    <div class="govuk-grid-column-one-third">
      <p class="govuk-body-s">
        <span class="govuk-!-font-weight-bold">
          <%= @page.repair_request.contact.name %>
        </span>
        reported on <%= @page.work_order.created.to_s(:govuk_date) %>
      </p>
    </div>
    <div class="govuk-grid-column-one-third">
      <%# Appointments %>
    </div>
  </div>
<% end %>

<ul class="govuk-list">
  <li>
    Telephone number: <%= @page.contact.telephone_number %>
  </li>
  <li>
    Email address: <%= @page.contact.email_address %>
  </li>
</ul>

<hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

<h2 class='govuk-heading-m'>
  <span class="govuk-caption-l">Appointment</span>
  Booked from <%= @page.appointment.begin_date.to_s(:govuk_date) %>
</h2>

<% if @page.appointment.out_of_target? %>
  <div class="govuk-warning-text">
    <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
    <strong class="govuk-warning-text__text">
      <span class="govuk-warning-text__assistive">Warning</span>
      This appointment has passed its target date.
    </strong>
  </div>
<% end %>

<ul class="govuk-list">
  <li>
    Target date: <%= @page.appointment.target_date.to_s(:govuk_date) %>
  </li>
  <li>
    Resource name: <%= @page.appointment.resource_name %>
  </li>
  <li>
    Status: <%= @page.appointment.status %>
  </li>
  <li>
    Priority: <%= @page.appointment.priority %>
  </li>
  <li>
    Data source: <%= @page.appointment.data_source %>
  </li>
</ul>
